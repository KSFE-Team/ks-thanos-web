{"version":3,"sources":["pages/GeneratePage/model/operate.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"names":["__webpack_exports__","namespace","initialState","operateId","history","isUndo","undoDisable","isRedo","redoDisable","reducers","undo","action","getState","operate","detail","modelName","actions","setReducers","length","redo","Number","save","saveWithOperateId","Object","_Users_caic_work_ks_project_ks_thanos_web_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","end","data","slice","state","__webpack_require__","d","_objectSpread","_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","i","arguments","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable"],"mappings":"uHAEeA,EAAA,SACXC,UAAW,UACXC,aAAc,CACVC,UAAW,EACXC,QAAS,GACTC,QAAQ,EACRC,aAAa,EACbC,QAAQ,EACRC,aAAa,GAEjBC,SAAU,CACNC,KAAM,SAACC,EAAQC,GACX,IACQC,EADMD,IACNC,QACAT,EAAuBS,EAAvBT,QAASD,EAAcU,EAAdV,UAEXW,EAASV,EAAQD,EAAY,GACnC,IAAK,IAAMY,KAAaD,EACpBE,UAAQD,GAAWE,YAAYH,EAAOC,IAG1CC,UAAQH,QAAQI,YAAY,CACxBd,UAAWA,EAAY,EACvBE,QAAQ,IAGZW,UAAQH,QAAQI,YAAY,CACxBX,YAAaH,EAAY,GAAK,EAC9BK,YAAaL,EAAYC,EAAQc,UAGzCC,KAAM,SAACR,EAAQC,GACX,IACQC,EADMD,IACNC,QACAT,EAAuBS,EAAvBT,QAASD,EAAcU,EAAdV,UAEXW,EAASV,EAAQD,GACvB,IAAK,IAAMY,KAAaD,EACpBE,UAAQD,GAAWE,YAAYH,EAAOC,IAG1CC,UAAQH,QAAQI,YAAY,CACxBd,UAAWiB,OAAOjB,GAAa,EAC/BG,YAAac,OAAOjB,GAAa,GAAK,EACtCK,YAAaY,OAAOjB,GAAa,IAAMC,EAAQc,OAC/CX,QAAQ,KAGhBc,KAAM,SAACV,EAAQC,GACX,IAEQT,EAFMS,IACNC,QACAV,UACRa,UAAQH,QAAQS,kBAAhBC,OAAAC,EAAA,EAAAD,CAAA,CACIpB,aACGQ,IAEPK,UAAQH,QAAQY,OAEpBH,kBAAmB,SAACX,EAAQC,GAAa,IAC7BT,EAA+BQ,EAA/BR,UAAWY,EAAoBJ,EAApBI,UAAWW,EAASf,EAATe,KAIxBtB,EAHQQ,IAENC,QACFT,QAEFD,EAAYC,EAAQc,SACpBd,EAAUA,EAAQuB,MAAM,EAAGxB,IAG1BC,EAAQD,KACTC,EAAQD,GAAa,IAGzBC,EAAQD,GAAWY,GAAaW,EAEhCV,UAAQH,QAAQI,YAAY,CACxBb,aAGRqB,IAAK,SAACd,EAAQC,GACV,IAAMgB,EAAQhB,IACRR,EAAUwB,EAAMf,QAAQT,QACxBD,EAAYiB,OAAOQ,EAAMf,QAAQV,WAAa,EAEpDa,UAAQH,QAAQI,YAAY,CACxBd,cAGJa,UAAQH,QAAQI,YAAY,CACxBX,YAAaH,EAAY,IAAM,EAC/BK,YAAaL,GAAaC,EAAQc,8CC5FlDW,EAAAC,EAAA9B,EAAA,sBAAA+B,IAAA,IAAAC,EAAAH,EAAA,KACe,SAAAE,EAAAE,GACf,QAAAC,EAAA,EAAiBA,EAAAC,UAAAjB,OAAsBgB,IAAA,CACvC,IAAAE,EAAA,MAAAD,UAAAD,GAAAC,UAAAD,GAAA,GACAG,EAAAd,OAAAe,KAAAF,GAEA,oBAAAb,OAAAgB,wBACAF,IAAAG,OAAAjB,OAAAgB,sBAAAH,GAAAK,OAAA,SAAAC,GACA,OAAAnB,OAAAoB,yBAAAP,EAAAM,GAAAE,eAIAP,EAAAQ,QAAA,SAAAC,GACMvB,OAAAS,EAAA,EAAAT,CAAcU,EAAAa,EAAAV,EAAAU,MAIpB,OAAAb,qCCjBe,SAAAc,EAAAC,EAAAF,EAAAG,GAYf,OAXAH,KAAAE,EACAzB,OAAA2B,eAAAF,EAAAF,EAAA,CACAG,QACAL,YAAA,EACAO,cAAA,EACAC,UAAA,IAGAJ,EAAAF,GAAAG,EAGAD,EAZAnB,EAAAC,EAAA9B,EAAA,sBAAA+C","file":"static/js/12.1c391476.chunk.js","sourcesContent":["import { actions } from 'kredux';\n\nexport default {\n    namespace: 'operate',\n    initialState: {\n        operateId: 0,\n        history: [],\n        isUndo: false,\n        undoDisable: true,\n        isRedo: false,\n        redoDisable: true\n    },\n    reducers: {\n        undo: (action, getState) => {\n            const state = getState();\n            const { operate } = state;\n            const { history, operateId } = operate;\n\n            const detail = history[operateId - 2];\n            for (const modelName in detail) {\n                actions[modelName].setReducers(detail[modelName]);\n            }\n\n            actions.operate.setReducers({\n                operateId: operateId - 1,\n                isUndo: true\n            });\n\n            actions.operate.setReducers({\n                undoDisable: operateId - 2 <= 0,\n                redoDisable: operateId > history.length,\n            });\n        },\n        redo: (action, getState) => {\n            const state = getState();\n            const { operate } = state;\n            const { history, operateId } = operate;\n\n            const detail = history[operateId];\n            for (const modelName in detail) {\n                actions[modelName].setReducers(detail[modelName]);\n            }\n\n            actions.operate.setReducers({\n                operateId: Number(operateId) + 1,\n                undoDisable: Number(operateId) + 2 <= 2,\n                redoDisable: Number(operateId) + 1 === history.length,\n                isRedo: true\n            });\n        },\n        save: (action, getState) => {\n            const state = getState();\n            const { operate } = state;\n            const { operateId } = operate;\n            actions.operate.saveWithOperateId({\n                operateId,\n                ...action\n            });\n            actions.operate.end();\n        },\n        saveWithOperateId: (action, getState) => {\n            const { operateId, modelName, data } = action;\n            const state = getState();\n\n            const { operate } = state;\n            let { history } = operate;\n\n            if (operateId < history.length) {\n                history = history.slice(0, operateId);\n            }\n\n            if (!history[operateId]) {\n                history[operateId] = {};\n            }\n\n            history[operateId][modelName] = data;\n\n            actions.operate.setReducers({\n                history\n            });\n        },\n        end: (action, getState) => {\n            const state = getState();\n            const history = state.operate.history;\n            const operateId = Number(state.operate.operateId) + 1;\n\n            actions.operate.setReducers({\n                operateId\n            });\n\n            actions.operate.setReducers({\n                undoDisable: operateId - 1 === 0,\n                redoDisable: operateId <= history.length\n            });\n        }\n    }\n};\n","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"sourceRoot":""}